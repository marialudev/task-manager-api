const express = require('express');
const router = express.Router();

// Um "banco de dados" temporário, usando um array
let tasks = [];
let idCounter = 1; // Contador para os IDs das tarefas

// Endpoint POST /tasks para criar uma nova tarefa
router.post('/', (req, res) => {
    const { title, description } = req.body;

    // Verificar se o título foi fornecido
    if (!title) {
        return res.status(400).json({ error: 'O título é obrigatório.' });
    }

    // Criar uma nova tarefa
    const newTask = {
        id: idCounter++,
        title,
        description: description || '', // Se descrição não for fornecida, usar uma string vazia
        status: 'Pendente',
        createdAt: new Date().toISOString() // Data de criação
    };

    // Adicionar a tarefa ao "banco de dados"
    tasks.push(newTask);

    // Retornar a tarefa criada
    res.status(201).json(newTask);
});

module.exports = router;
